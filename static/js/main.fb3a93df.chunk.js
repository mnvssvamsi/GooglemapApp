(this.webpackJsonpevent=this.webpackJsonpevent||[]).push([[0],{44:function(e,t,n){e.exports=n(78)},49:function(e,t,n){},50:function(e,t,n){},56:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(12),c=n.n(o),l=(n(49),n(16)),u=n(17),i=n(19),s=n(18),m=n(2),p=n(43),d=n(3),f=n(23),b=(n(50),n(11)),E=n(9),v=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return console.log("nav",this.props),r.a.createElement("nav",null,r.a.createElement("ul",{className:"navbar"},r.a.createElement("ul",{className:"navbar-home"},this.props.isAuthenticated?r.a.createElement("li",{className:"NavigationItem"},r.a.createElement(b.b,{to:"/logout"},"Logout")):r.a.createElement("li",{className:"NavigationItem"},r.a.createElement(b.b,{to:"/"},"Login")))))}}]),n}(a.Component),g=Object(E.b)((function(e){return{isAuthenticated:null!==e.auth.token}}))(v),h=(n(56),n(13)),O=n.n(h),j=(n(74),r.a.memo((function(e){console.log("reviewModal",e);var t=Object(a.useState)(""),n=Object(d.a)(t,2),o=n[0],c=n[1],l=Object(a.useState)(!1),u=Object(d.a)(l,2),i=u[0],s=u[1];return r.a.createElement(r.a.Fragment,null,i&&e.close(),r.a.createElement("div",{className:"backdrop",onClick:e.close}),r.a.createElement("div",{className:"review-modal"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={reviews:o};O.a.post("https://map-building-7f022.firebaseio.com/reviews.json",t).then((function(e){})).catch((function(e){console.log(e)})),s(!0)}},r.a.createElement("label",{className:"text-label"},"Enter your review"),r.a.createElement("textarea",{className:"text",value:o,onChange:function(e){c(e.target.value)}}),r.a.createElement("input",{className:"review-submit",type:"submit"})),r.a.createElement("div",{className:"review-modal__actions"},r.a.createElement("button",{type:"button",onClick:e.close},"X"))))}))),S=(n(75),function(e){var t=Object(a.useState)([]),n=Object(d.a)(t,2),o=n[0],c=n[1],l=Object(a.useState)(!1),u=Object(d.a)(l,2),i=u[0],s=u[1];Object(a.useEffect)((function(){O.a.get("https://map-building-7f022.firebaseio.com/reviews.json").then((function(e){var t=e.data,n=[];for(var a in t)n.push({id:a,review:t[a].reviews});c(n)})).catch((function(e){console.log(e)}))}),[]);var m=o.map((function(e){return r.a.createElement("p",{className:"review",key:e.id},e.review)}));return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"display-review-modal"},i&&r.a.createElement(j,{close:function(){s(!1)}}),r.a.createElement("button",{onClick:function(){s(!0)},className:"write-review"},"Write a review"),m,r.a.createElement("div",{className:"display-review-modal__actions"},r.a.createElement("button",{type:"button",onClick:e.close},"X"))))}),k=r.a.memo((function(e){var t=Object(a.useState)(!1),n=Object(d.a)(t,2),o=n[0],c=n[1];console.log("modal",e);return r.a.createElement(r.a.Fragment,null,o?r.a.createElement(S,{close:function(){c(!1)}}):null,r.a.createElement("div",{className:"error-modal"},r.a.createElement("button",{className:"reviewButton",onClick:function(){c(!0)}},"Reviews"),r.a.createElement("div",{className:"error-modal__actions"},r.a.createElement("button",{type:"button",onClick:e.close},"X"))))})),y={height:"100vh",width:"100vw"},N={lat:16.710661,lng:81.095245},w={zoomControl:!0},I=["places"];var T=function(){var e=Object(f.c)({libraries:I}),t=e.isLoaded,n=e.loadError,o=Object(a.useState)([]),c=Object(d.a)(o,2),l=c[0],u=c[1],i=r.a.useState(null),s=Object(d.a)(i,2),m=s[0],b=s[1],E=r.a.useCallback((function(e){u((function(t){return[].concat(Object(p.a)(t),[{lat:e.latLng.lat(),lng:e.latLng.lng(),time:new Date}])}))}),[]),v=r.a.useRef(),h=r.a.useCallback((function(e){v.current=e}),[]);return n?"Error":t?r.a.createElement("div",null,r.a.createElement(g,null),r.a.createElement(f.a,{id:"map",mapContainerStyle:y,zoom:8,center:N,options:w,onClick:E,onLoad:h},l.map((function(e){return r.a.createElement(f.b,{key:"".concat(e.lat,"-").concat(e.lng),position:{lat:e.lat,lng:e.lng},onClick:function(){b(e)}})})),m?r.a.createElement(k,{lat:m.lat,lng:m.lng,close:function(){b(null)}}):null)):"Loading..."},A=(n(76),function(e,t){return{type:"AUTH_SUCCESS",idToken:e,userId:t}}),C=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),{type:"AUTH_LOGOUT"}},_=function(e){return function(t){setTimeout((function(){t(C())}),1e3*e)}},U=Object(E.b)((function(e){return{error:e.auth.error,token:e.auth.token,isAuthenticated:null!==e.auth.token}}),(function(e){return{onAuth:function(t,n,a){return e(function(e,t,n){return function(a){a({type:"AUTH_START"});var r={email:e,password:t,returnSecureToken:!0},o="https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyCheBZOjnQsPJsu3hE6a3Sjgdp07_GwsjM";n||(o="https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyCheBZOjnQsPJsu3hE6a3Sjgdp07_GwsjM"),O.a.post(o,r).then((function(e){console.log(e);var t=new Date((new Date).getTime()+1e3*e.data.expiresIn);localStorage.setItem("token",e.data.idToken),localStorage.setItem("expirationDate",t),localStorage.setItem("userId",e.data.localId),a(A(e.data.idToken,e.data.localId)),a(_(e.data.expiresIn))})).catch((function(e){console.log(e),a({type:"AUTH_FAIL",error:e.response.data.error})}))}}(t,n,a))}}}))((function(e){var t=Object(a.useState)(""),n=Object(d.a)(t,2),o=n[0],c=n[1],l=Object(a.useState)(""),u=Object(d.a)(l,2),i=u[0],s=u[1],p=Object(a.useState)(""),f=Object(d.a)(p,2),b=f[0],E=f[1],v=Object(a.useState)(""),h=Object(d.a)(v,2),O=h[0],j=h[1],S=Object(a.useState)(!0),k=Object(d.a)(S,2),y=k[0],N=k[1];return r.a.createElement(a.Fragment,null,r.a.createElement(g,null),e.isAuthenticated&&r.a.createElement(m.a,{to:"/names"}),r.a.createElement("div",{className:"ContactData"},r.a.createElement("form",{onSubmit:function(t){return function(t){t.preventDefault(),e.onAuth(o,i,y);/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/.test(o)?(E(""),j(""!==i?"":"please enter a valid password")):E("please enter a valid email")}(t)}},r.a.createElement("div",{className:"Input"},r.a.createElement("input",{className:"InputElement",type:"email",placeholder:" E-Mail",name:"email",pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$",onChange:function(e){E(""),c(e.target.value)},value:o}),b&&r.a.createElement("p",{className:"error",style:{color:"red"}},b)),r.a.createElement("div",{className:"Input"},r.a.createElement("input",{className:"InputElement",type:"password",placeholder:" Password",name:"password",onChange:function(e){j(""),s(e.target.value)},value:i,minLength:"6"}),O&&r.a.createElement("p",{className:"error",style:{color:"red"}},O)),r.a.createElement("div",null,r.a.createElement("button",{className:"Button",disabled:""},"SUBMIT"))),r.a.createElement("button",{onClick:function(){N(!y)}},"SWITCH TO ",y?"SIGN IN":"REGISTER")))})),D=(n(77),Object(E.b)((function(e){return{token:e.auth.token}}),(function(e){return{onName:function(t,n){return e(function(e,t){console.log("action",t);var n={name:e};return function(e){e({type:"NAME_START"}),O.a.post("https://map-building-7f022.firebaseio.com/names.json?auth="+t,n).then((function(t){console.log(t.data),e(function(e){return{type:"NAME_SUCCESS",name:e}}(t.data.names))})).catch((function(t){e(function(e){return{type:"NAME_FAIL",error:e}}(t))}))}}(t,n))}}}))((function(e){var t=Object(a.useState)(""),n=Object(d.a)(t,2),o=n[0],c=n[1],l=Object(a.useState)(!1),u=Object(d.a)(l,2),i=u[0],s=u[1];return r.a.createElement("div",{className:"welcome"},i&&r.a.createElement(m.a,{to:"/names/maps"}),r.a.createElement(g,null),r.a.createElement("h2",null,"Welcome to Maps"),r.a.createElement("p",null,"Please enter your name here before checking the maps"),r.a.createElement("form",{className:"form",onSubmit:function(t){t.preventDefault(),e.onName(o,e.token),s(!0)}},r.a.createElement("input",{className:"name",type:"text",value:o,placeholder:"Enter your name",required:!0,onChange:function(e){c(e.target.value)}}),r.a.createElement("input",{className:"submit",type:"submit"})))}))),L=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.onLogout()}},{key:"render",value:function(){return r.a.createElement(m.a,{to:"/"})}}]),n}(a.Component),M=Object(E.b)(null,(function(e){return{onLogout:function(){return e(C())}}}))(L),x=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignUp()}},{key:"render",value:function(){var e=r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/",exact:!0,component:U}),r.a.createElement(m.a,{to:"/"}));return this.props.isAuthenticated&&(e=r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/names",exact:!0,component:D}),r.a.createElement(m.b,{path:"/names/maps",component:T}),r.a.createElement(m.b,{path:"/logout",component:M}),r.a.createElement(m.b,{path:"/",exact:!0,component:U}),r.a.createElement(m.a,{to:"/"}))),r.a.createElement("div",null,e)}}]),n}(a.Component),z=Object(m.g)(Object(E.b)((function(e){return{isAuthenticated:null!==e.auth.token}}),(function(e){return{onTryAutoSignUp:function(){return e((function(e){var t=localStorage.getItem("token");if(t){var n=new Date(localStorage.getItem("expirationDate"));if(n<=new Date)e(C());else{var a=localStorage.getItem("userId");e(A(t,a)),e(_(n.getTime()-(new Date).getTime()/1e3))}}else e(C())}))}}}))(x)),H=n(29),R=function(e,t){return Object(H.a)(Object(H.a)({},e),t)},F={token:null,userId:null,error:null,loading:!1},B=function(e,t){return R(e,{error:null,loading:!0})},G=function(e,t){return R(e,{token:t.idToken,userId:t.userId,error:null,loading:!1})},P=function(e,t){return R(e,{error:t.error,loading:!1})},X=function(e,t){return R(e,{token:null,userId:null})},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return B(e);case"AUTH_SUCCESS":return G(e,t);case"AUTH_FAIL":return P(e,t);case"AUTH_LOGOUT":return X(e);default:return e}},W={token:null,error:null,loading:!1,userName:null},Q=function(e,t){return R(e,{error:null,loading:!0})},Z=function(e,t){return R(e,{token:t.idToken,userId:t.userId,error:null,loading:!1})},$=function(e,t){return R(e,{error:t.error,loading:!1})},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NAME_START":return Q(e);case"NAME_SUCCESS":return Z(e,t);case"NAME_FAIL":return $(e,t);default:return e}},V=n(14),K=n(42),Y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||V.d,ee=Object(V.c)({auth:J,welcome:q}),te=Object(V.e)(ee,Y(Object(V.a)(K.a))),ne=r.a.createElement(E.a,{store:te},r.a.createElement(b.a,null,r.a.createElement(z,null)));c.a.render(ne,document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.fb3a93df.chunk.js.map